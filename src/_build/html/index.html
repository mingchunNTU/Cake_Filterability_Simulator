<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to Filtration_Simulator’s documentation! &mdash; Filtration_Simulator  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="data.py module" href="data.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> Filtration_Simulator
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="data.html">data.py module</a></li>
<li class="toctree-l1"><a class="reference internal" href="figure.html">figure.py module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">utility.py module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Filtration_Simulator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Welcome to Filtration_Simulator’s documentation!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="welcome-to-filtration-simulator-s-documentation">
<h1>Welcome to Filtration_Simulator’s documentation!<a class="headerlink" href="#welcome-to-filtration-simulator-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>This program simulates the crystal filter cake structure and filterability using CFD-DEM scheme. The program generates the scripts needed for CFDEM simulations according to the setting files of the current directory. To install the program, please add the following line to your ~/.bashrc file and source it again.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">source $HOME/Filtration_Simulator/src/etc/bashrc</span>
</pre></div>
</div>
<p>To execute the program, please enter the following command. To execute the program successfully, please make sure you install CFDEM project correctly and cfdemSolverPiso command works well. The installation guide of CFDEM project can be found in <a class="reference external" href="https://www.cfdem.com/media/CFDEM/docu/CFDEMcoupling_Manual.html#installation">https://www.cfdem.com/media/CFDEM/docu/CFDEMcoupling_Manual.html#installation</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">filtration_simulator --keyword arg</span>
</pre></div>
</div>
<p>To configure the simulation setting, configure.csv and CSD.csv are needed in the current directory. configure.csv defines the simulation parameters such as system dimension, insertion condition and solver setting. CSD.csv defines the crystal size distriubtion of the system. To avoid the numerical problem encountered when the particle size is too small, the parameters are defined using a customized unit system instead of SI unit. The conversion factors between SI unit system and customized unit system are shown below.The units of coupling interval is the time step of LIGGGHTS.</p>
<ul class="simple">
<li>Length: <span class="math notranslate nohighlight">\(1\ \mu m=10^{-6}\ m\)</span></li>
<li>Time: <span class="math notranslate nohighlight">\(1\ \mu s=10^{-6}\ s\)</span></li>
<li>Mass: <span class="math notranslate nohighlight">\(1\ pg=10^{-15}\ kg\)</span></li>
<li>Velocity: <span class="math notranslate nohighlight">\(1\ \mu m/ \mu s=1\ m/s\)</span></li>
<li>Gravity: <span class="math notranslate nohighlight">\(1\ \mu m/{\mu s^2}=10^{6}\ m/s^2\)</span></li>
<li>Density: <span class="math notranslate nohighlight">\(1\ pg/{\mu m^3}=10^{3}\ kg/m^3\)</span></li>
<li>Pressure (Youngs’s Modulus): <span class="math notranslate nohighlight">\(1\ pg/(\mu m  \cdot \mu s^2)=10^{3}\ kg/(m \cdot s^2)\)</span></li>
<li>Cohesion Energy Density: <span class="math notranslate nohighlight">\(1\ pg/(\mu m  \cdot \mu s^2)=10^{3}\ kg/(m \cdot s^2)\)</span></li>
<li>Dynamic Viscosity: <span class="math notranslate nohighlight">\(1\ pg/(\mu m \cdot \mu s)=10^{-3}\ kg/(m \cdot s)\)</span></li>
<li>Kinematic Viscosity: <span class="math notranslate nohighlight">\(1\ {\mu m^2}/{\mu s}=10^{-6}\ m^2/s\)</span></li>
<li>Filter Cake Resistance: <span class="math notranslate nohighlight">\(1\ {\mu m}/pg=10^{9}\ m/kg\)</span></li>
</ul>
<p>When the program is executed, the base case in src/resource/base case is copied to ./CFDEM and modified according to the content of configure.csv and CSD.csv. The file structure of CFDEM is shown below. The geometry of insertion face and bottom wall need to be defined as stl file in DEM/stl_file directory. If the location and dimension of the stl files need to be changed, users can edit the box.blend in DEM/stl_file using blender software, and export the geometry as stl files. The file names should be kept the same as the examples. When stl files are exported, only the value is exported ,and the unit information is lost. Thus, the default unit should be the same as the unit of LIGGGHTS.</p>
<ul class="simple">
<li>Allrun.sh: the execution script for simulation</li>
<li>clean_case.sh: clean the previous simulation result</li>
<li>parDEMrun.sh: create the filter cake structure using DEM</li>
<li>parCFDEMrun.sh: execute the CFDEM simulation</li>
<li>DEM<ul>
<li>stl_file: stl file for insertion face and bottom wall</li>
<li>vtk_file: simulation result of DEM</li>
<li>liggghts_init.txt: create the filter cake structure</li>
<li>liggghts_run.txt: coupling file for CFDEM simulation</li>
</ul>
</li>
<li>CFDEM<ul>
<li>0: initial condition of each field</li>
<li>constant: physical property and coupling property</li>
<li>postProcessing: the sampling result of CFDEM</li>
<li>system: mesh information and solver setting</li>
<li>VTK: simulation result of CFDEM</li>
</ul>
</li>
<li>Result: The sampling result of DEM and CFDEM</li>
</ul>
<p>To get familiar with the files in CFDEM diresctory, users can refer to files in examples/uniform/CFDEM. To change the number of processors used in DEM and CFD-DEM, users can change the nrProcs parameters of parDEMrun.sh and parCFDEMrun.sh. To check the number of processors, please type the following commands through command line.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cat /proc/cpuinfo | grep &quot;^cpu cores&quot; | uniq</span>
</pre></div>
</div>
<p>For post-processing, the situation is a little bit complicated. The <em>reconstructPar -noLagrangian</em> command is used in parCFDEMrun.sh script to combine the simulation results of each processor as one .foam file. Furthermore, to make the post-processing easier, the .foam file is transformed to vtk files using <em>foamToVTK</em> command. However, it’s found that to use <em>reconstructPar</em>, <em>foamToVTK</em> or <em>parafoam</em> commands, a different version of openfoam is needed. According to my experience, version 5.x can be used for CFDEM simulation, and version 9 can be used for post-processing. To install the openfoam version 9, type the following commands through command line. Although openfoam9 is installed, it’s not configured. To configure openfoam9, a command <em>source /opt/openfoam9/etc/bashrc</em> is added to parCFDEMrun.sh script. Thus, if users want to excute Allrun.sh again, the terminal must be closed and open again, or the openfoam version will become version 9 and the execution of CFDEM will not be successful.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo sh -c &quot;wget -O - https://dl.openfoam.org/gpg.key &gt; /etc/apt/trusted.gpg.d/openfoam.asc&quot;</span>
<span class="go">sudo add-apt-repository http://dl.openfoam.org/ubuntu</span>
<span class="go">sudo apt-get update</span>
<span class="go">sudo apt-get -y install openfoam9</span>
</pre></div>
</div>
<p>To visaulize the simulation result of CFD-DEM, the vtk files in CFD/VTK directory (for velocity and pressure field) and DEM/vtk directory (for filter cake) should be imported into paraview software.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="data.html">data.py module</a></li>
<li class="toctree-l1"><a class="reference internal" href="figure.html">figure.py module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">utility.py module</a></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="data.html" class="btn btn-neutral float-right" title="data.py module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Ming-Chun Fang.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>